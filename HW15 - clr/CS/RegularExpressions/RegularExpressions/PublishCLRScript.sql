  
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;
 
USE WideWorldImporters 
GO

PRINT N'Creating [RegularExpressions]...'; 
GO

CREATE ASSEMBLY [RegularExpressions]
    AUTHORIZATION [dbo]
    FROM 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C01030026C4425F0000000000000000E00022200B013000001A000000060000000000002E380000002000000040000000000010002000000002000004000000000000000600000000000000008000000002000000000000030060850000100000100000000010000010000000000000100000000000000000000000DC3700004F00000000400000D002000000000000000000000000000000000000006000000C000000A43600001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E746578740000003418000000200000001A000000020000000000000000000000000000200000602E72737263000000D00200000040000000040000001C0000000000000000000000000000400000402E72656C6F6300000C000000006000000002000000200000000000000000000000000000400000420000000000000000000000000000000010380000000000004800000002000500502600005410000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B3003007B0000000100001100000F00280D00000A2D150F01280D00000A2D0C0F02280D00000A16FE012B01160A062C42000F00280E00000A0F01280E00000A280F00000A0B072C220F00280E00000A0F01280E00000A0F02280E00000A281000000A281100000A0CDE1A7E1200000A0CDE127E1200000A0CDE0A26007E1200000A0CDE00082A0001100000000001006E6F000A050000011B300200390000000200001100000F01280E00000A7E01000004731300000A0A06026F1400000A731500000A6F1600000A281700000A0BDE0A26007E1800000A0BDE00072A00000001100000000001002C2D000A050000011B300200650000000300001100000F01280E00000A7E01000004731300000A0A06026F1400000A731500000A6F1900000A0B076F1A00000A2D07281B00000A2B21076F1C00000A0F02280E00000A6F1D00000A6F1E00000A281100000A731F00000A0CDE0A2600281B00000A0CDE00082A00000001100000000001005859000A05000001133002001D0000000400001100026F1400000A731500000A0F01280E00000A730C0000060A2B00062A000000133002002C00000005000011000274030000020A03066F09000006732000000A810E00000104066F0A0000066F2100000A732200000A512A133002001D0000000400001100026F1400000A731500000A0F01280E00000A73120000060A2B00062A000000133002003E00000006000011000274050000020A03066F0E000006732000000A810E00000104066F0F0000066F2100000A732200000A5105066F100000066F2100000A732200000A512A221F3080010000042A00133001000C0000000700001100027B020000040A2B00062A133001000C0000000800001100027B030000040A2B00062A5E02282300000A000002037D0200000402047D030000042A8602282300000A000002047E01000004731300000A7D0400000402037D050000042A3A16731400000625027D0D0000042A000000133001000C0000000700001100027B060000040A2B00062A133001000C0000000800001100027B070000040A2B00062A133001000C0000000800001100027B080000040A2B00062A7A02282300000A000002037D0600000402047D0700000402057D080000042A8602282300000A000002047E01000004731300000A7D0900000402037D0A0000042A3A16731A00000625027D120000042A3E02282300000A0002037D0B0000042A062A000013300300C500000009000011027B0B0000040A062C082B0006172E042B072B07388F000000162A02157D0B0000040002167D0E00000402147D0F0000040002027B0F0000042C0D027B0F0000046F2400000A2B1B027B0D0000047B04000004027B0D0000047B050000046F1900000A7D0F000004027B0F0000046F1A00000A0B072C390002027B0E00000417580C02087D0E00000408027B0F0000046F1E00000A730B0000067D0C00000402177D0B000004172A02157D0B0000040000027B0F0000046F1A00000A0D093A6EFFFFFF162A1E027B0C0000042A1A732500000A7A3E02282300000A0002037D100000042A133004007C0100000A000011027B100000040A062C082B0006172E042B072B07380C010000162A02157D100000040002167D1300000402147D1400000402027B120000047B090000046F2600000A7D1500000400027B130000040B020717587D1300000402027B140000042C0D027B140000046F2400000A2B1B027B120000047B09000004027B120000047B0A0000046F1900000A7D14000004027B140000046F1A00000A0C0839C5000000000002027B150000047D1600000402167D17000004389000000002027B16000004027B170000049A7D180000040002027B140000046F1C00000A027B180000046F1D00000A7D19000004027B190000046F1A00000A0D092C340002027B13000004027B18000004027B190000046F1E00000A73110000067D1100000402177D10000004172A02157D10000004000002147D1900000402147D1800000402027B1700000417587D17000004027B17000004027B160000048E693F5DFFFFFF02147D160000040000027B140000046F1A00000A130411043ACDFEFFFF162A1E027B110000042A42534A4201000100000000000C00000076342E302E33303331390000000005006C00000024070000237E0000900700009405000023537472696E677300000000240D00000400000023555300280D0000100000002347554944000000380D00001C03000023426C6F6200000000000000020000015717A20B0902000000FA013300160000010000001A00000008000000190000001F0000001E0000000800000026000000160000000A0000000400000009000000090000000A00000001000000010000000300000002000000000034020100000000000600A5014A030600C5014A030600460137030F006A03000006001E0468020A00E503B3030E009001D9020E00F40194030E006F0294030E00090494030A007805B3030A002E02B3030600D100D2030E001B0094030600F800680206005A014A030600F402D20306002B014A030600DD00680206000D009A000600780137030A00CD02B3030600030268020A007A02B3030A00FD00B30306008A0268020000000077000000000001000100810110007505BF0315000100010000001000BD00BF03150002000900000010000E03BF03150004000C0000001000C700BF03150006000E00000010001C03BF03150009001200030110003E00000015000B001400030110003E000000150010001A003600EA03D10001006E05D5000100ED01D80001007E05DB0001003505D80001006E05D5000100F200D8000100ED01D80001007E05DB0001003505D80001002001D50001002805DF000600A903E20001000100D50001002400E60001002001D50001002805DF000600A903EA0001000100D50001002400E60001003200EE0001005200EE0001005900D50001006000D80001006B00F20050200000000096000A02F6000100E8200000000096002902010104004021000000009600C8020A010600C421000000009600790315010900F0210000000096004A051E010B002822000000009600FD0315010E0054220000000096005705290110009E22000000009118300337011400A82200000000860864053B011400C022000000008608E30130001400D8220000000086182A033F011400F0220000000086182A0345011600122300000000E60100034B011800242300000000860864053B0118003C23000000008608E900300018005423000000008608E301300018006C230000000086182A03500118008B230000000086182A0345011B00AD2300000000E60100034B011D00BC230000000086182A0301001D00CC2300000000E101050106001E00D02300000000E1013C0516001E00A12400000000E109BB0425001E00A92400000000E101250406001E00A12400000000E109FD0425001E00B0240000000086182A0301001E00CC2300000000E101050106001F00C02400000000E1013C0516001F00482600000000E109BB0425001F00A92400000000E101250406001F00482600000000E109FD0425001F0000000100FE0100000200A00200000300AD0200000100360500000200C00200000100360500000200C00200000300F30000000100360500000200C002000001008C00020002006F0502000300450500000100360500000200C002000001008C00020002006F0502000300D302020004004505000001006F0500000200EE0100000100360500000200C002000001006F0500000200D30200000300EE0100000100360500000200C00200000100200100000100200104003500060035000700060007004D00070045000800060008004D000800450009002A03010011002A03060019002A030A0039002A03060081002A03100091002A03060099001801060089003C0516000C001C05200089004404060089001C052500A9002A0306004100540216004100E30130005900170234005900B5003A0041004A04410041005A02470059002A0352005100E3015900B9002A035E0059001702640049004A04690049005A026F0059002E027C00B1001204160051004B0282006100F2038700C1005F028C00C900E301300051002A03920071002A030100B9008505590051002A035E0029002A03060061001F02B600D1002A03060059008603C3002000230094012E000B0063012E0013006C012E001B008B0140002300C00160002300C00180002300D801C00023003102E30033001403030133001403A0012B00A00260022B00DA02800263001403A00263001403E00263001403000363001403200363001403400363001403600363001403A00363001403C00363001403E0036300140329004B00730098009D00A200A700AB00AF00BB00030001000500030007000600080008000000680557010000E7015B010000680557010000ED005B010000E7015B01000056045F01000094045F01000056045F01000094045F0102000900030002000A00050002000E00070002000F000900020010000B00020017000D00020019000F0002001D00110002001F00130007002A000F0007002C00110007002E001300070030001500070032001700080036000F0008003800110008003A00130008003C00150008003E0017001A00048000000000000000000000000000000000BF030000040000000000000000000000C800910000000000040000000000000000000000C800680200000000040000000000000000000000C80080000000000007000400080006000000003C696E6465783E355F5F310049456E756D657261746F7260310053716C496E743332003C63757272656E743E355F5F32003C6E616D65733E355F5F33003C476574456E756D657261746F723E645F5F33003C3E735F5F34003C3E735F5F35003C6E616D653E355F5F36003C67726F75703E355F5F37003C4D6F64756C653E0053797374656D2E446174610064617461006D73636F726C69620053797374656D2E436F6C6C656374696F6E732E47656E65726963005265706C616365004D617463684E6F64650047726F75704E6F64650049456E756D657261626C650049446973706F7361626C65006765745F4E616D65005F6E616D65005479706500436170747572650053797374656D2E49446973706F7361626C652E446973706F7365003C3E315F5F737461746500436F6D70696C657247656E6572617465644174747269627574650044656275676761626C65417474726962757465004974657261746F7253746174654D616368696E6541747472696275746500446562756767657248696464656E4174747269627574650053716C46756E6374696F6E41747472696275746500436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465006765745F56616C7565005F76616C75650053716C537472696E6700496E707574537472696E67005265706C6163654D617463680049734D61746368004E6578744D617463680052656765784D6174636800526567756C617245787072657373696F6E732E646C6C006765745F4E756C6C006765745F49734E756C6C006765745F4974656D0053797374656D0053716C426F6F6C65616E0047726F7570436F6C6C656374696F6E004E6F74537570706F72746564457863657074696F6E004D617463685061747465726E005265706C6163656D656E745061747465726E007061747465726E00526567657847726F75700067726F7570004D6963726F736F66742E53716C5365727665722E5365727665720049456E756D657261746F7200476574456E756D657261746F72004D617463684974657261746F720047726F75704974657261746F72002E63746F72002E6363746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F6465730052656765784D6174636865730047657447726F75704E616D65730053797374656D2E446174612E53716C5479706573003C3E345F5F746869730053797374656D2E546578742E526567756C617245787072657373696F6E730053797374656D2E436F6C6C656374696F6E730052656765784F7074696F6E73006765745F47726F75707300526567657847726F7570730053716C4368617273006765745F53756363657373004F626A6563740053797374656D2E436F6C6C656374696F6E732E49456E756D657261746F722E5265736574006F705F496D706C696369740053797374656D2E436F6C6C656374696F6E732E47656E657269632E49456E756D657261746F723C53797374656D2E4F626A6563743E2E43757272656E740053797374656D2E436F6C6C656374696F6E732E49456E756D657261746F722E43757272656E740053797374656D2E436F6C6C656374696F6E732E47656E657269632E49456E756D657261746F723C53797374656D2E4F626A6563743E2E6765745F43757272656E740053797374656D2E436F6C6C656374696F6E732E49456E756D657261746F722E6765745F43757272656E74003C3E325F5F63757272656E74005F696E707574004D6F76654E65787400746578740046696C6C4D61746368526F770046696C6C47726F7570526F77006765745F496E646578005F696E6465780053716C5265676578005F726567657800546F436861724172726179000000000000000018669DE764F991468BEE42C4226D995D0004200101080320000105200101111105200101123D0320000205151251011C04200013000320001C060703020211210320000E050002020E0E0600030E0E0E0E05000111210E03061121060702122D1125062002010E11190420001D03052001011D03042001020E05000111250203061125080703122D1231122905200112310E0400001229042000126105200112590E0520010111210407011235040701120C0407011214030701080307010E06070408020802042000123107070508080202020420001D0E08B77A5C561934E0890306111902060802060E0306122D02061C03061210030612310306121803061D0E030612590A000311211121112111210800021125122911210A000312291229112111210800021235122911210A0003011C1011391012290D0004011C101139101229101229030000010320000805200201080E052002010E0E042000124506200301080E0E032800080328000E0328001C0801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F7773010801000701000000002B01000200540E044E616D650C5265706C6163654D6174636854020F497344657465726D696E697374696301170100010054020F497344657465726D696E6973746963015801000200540E1146696C6C526F774D6574686F644E616D650C46696C6C4D61746368526F77540E0F5461626C65446566696E6974696F6E205B496E6465785D20696E742C5B546578745D206E76617263686172286D6178296E01000200540E1146696C6C526F774D6574686F644E616D650C46696C6C47726F7570526F77540E0F5461626C65446566696E6974696F6E365B496E6465785D20696E742C5B47726F75705D206E76617263686172286D6178292C5B546578745D206E76617263686172286D61782939010034526567756C617245787072657373696F6E732E4D617463684974657261746F722B3C476574456E756D657261746F723E645F5F33000039010034526567756C617245787072657373696F6E732E47726F75704974657261746F722B3C476574456E756D657261746F723E645F5F33000004010000000000000000000026C4425F00000000020000001C010000C0360000C018000052534453784B4B25B8B8374A8CD540E8FD74B62901000000443A5C576F726B696E675C4769745265706F7369746F72795C4F7475735C6F7475732D6D7373716C2D323032302D30362D706F6C796174796B696E615C48573133202D2073702C66756E635C43535C526567756C617245787072657373696F6E735C526567756C617245787072657373696F6E735C6F626A5C44656275675C526567756C617245787072657373696F6E732E7064620000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000438000000000000000000001E38000000200000000000000000000000000000000000000000000010380000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000740200000000000000000000740234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004D4010000010053007400720069006E006700460069006C00650049006E0066006F000000B001000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E00300000004E001700010049006E007400650072006E0061006C004E0061006D006500000052006500670075006C0061007200450078007000720065007300730069006F006E0073002E0064006C006C00000000002800020001004C006500670061006C0043006F0070007900720069006700680074000000200000005600170001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000052006500670075006C0061007200450078007000720065007300730069006F006E0073002E0064006C006C0000000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003000000C000000303800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000;
GO

PRINT N'Creating [dbo].[RegexGroup]...'; 
GO

CREATE FUNCTION [dbo].[RegexGroup]
(@input NVARCHAR (MAX) NULL, @pattern NVARCHAR (MAX) NULL, @name NVARCHAR (MAX) NULL)
RETURNS NVARCHAR (MAX)
AS
 EXTERNAL NAME [RegularExpressions].[RegularExpressions.SqlRegex].[RegexGroup]


GO
PRINT N'Creating [dbo].[RegexMatch]...';


GO
CREATE FUNCTION [dbo].[RegexMatch]
(@input NVARCHAR (MAX) NULL, @pattern NVARCHAR (MAX) NULL)
RETURNS BIT
AS
 EXTERNAL NAME [RegularExpressions].[RegularExpressions.SqlRegex].[RegexMatch]


GO
PRINT N'Creating [dbo].[ReplaceMatch]...';


GO
CREATE FUNCTION [dbo].[ReplaceMatch]
(@InputString NVARCHAR (MAX) NULL, @MatchPattern NVARCHAR (MAX) NULL, @ReplacementPattern NVARCHAR (MAX) NULL)
RETURNS NVARCHAR (MAX)
AS
 EXTERNAL NAME [RegularExpressions].[RegularExpressions.SqlRegex].[ReplaceMatch]


GO
PRINT N'Creating [dbo].[RegexGroups]...';


GO
CREATE FUNCTION [dbo].[RegexGroups]
(@input NVARCHAR (MAX) NULL, @pattern NVARCHAR (MAX) NULL)
RETURNS 
     TABLE (
        [Index] INT            NULL,
        [Group] NVARCHAR (MAX) NULL,
        [Text]  NVARCHAR (MAX) NULL)
AS
 EXTERNAL NAME [RegularExpressions].[RegularExpressions.SqlRegex].[RegexGroups]


GO
PRINT N'Creating [dbo].[RegexMatches]...';


GO
CREATE FUNCTION [dbo].[RegexMatches]
(@input NVARCHAR (MAX) NULL, @pattern NVARCHAR (MAX) NULL)
RETURNS 
     TABLE (
        [Index] INT            NULL,
        [Text]  NVARCHAR (MAX) NULL)
AS
 EXTERNAL NAME [RegularExpressions].[RegularExpressions.SqlRegex].[RegexMatches]


GO
PRINT N'Update complete.';


GO
